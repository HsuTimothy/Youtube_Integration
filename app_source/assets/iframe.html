<html>
<head>
  <meta charset="utf-8">
  <!-- http://garden.zendesk.com -->
  <link rel="stylesheet" href="https://assets.zendesk.com/apps/sdk-assets/css/0/zendesk_garden.css" type="text/css">
</head>
<body>
  <iframe id="video" src="https://www.youtube.com/embed/video_id"></iframe>
  <!-- https://github.com/zendesk/zendesk_app_framework_sdk -->
  <script type="text/javascript" src="https://assets.zendesk.com/apps/sdk/2.0/zaf_sdk.js"></script>
  <script>
    // Initialise the Zendesk JavaScript API client
    // https://developer.zendesk.com/apps/docs/apps-v2
    var client = ZAFClient.init();
    client.invoke('resize', { width: '100%', height: '150px' });

    // const comment = client.get('ticket.comments'); 
    // comment.then(function(x) {
    //   console.log(x);
    // });
    client.get('currentUser').then(function(x) { console.log(x) });
    const channelDisplayInfo = client.get('ticket.comments.0.channelDisplayInfo');
    channelDisplayInfo.then(function(x) {
      console.log(x)
      //console.log(x['ticket.comments.0.channelDisplayInfo']);
    });

    // userComment = comment.then(function(x) {
    //   console.log(x)

    //   const channelDisplayInfo = x['ticket.comments'][0].channelDisplayInfo; // Top level comment

    //   console.log('videoId')
    //   const videoId = channelDisplayInfo[0];
    //   console.log(videoId);
    //   document.getElementById("video").src = "https://www.youtube.com/embed/9s90uagMKZ8"
    //   // document.getElementById("video").src = "https://www.youtube.com/embed/" + videoId;
    // });
    
    // console.log(userComment)
  </script>
</body>
</html>
